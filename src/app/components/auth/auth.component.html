<div class="container">
  <video autoplay loop muted>
    <source
      src="../../../assets/img/resources/over-the-crater-3370-1080p.mp4"
      type="video/mp4"
    />
    Your browser does not support the video tag.
  </video>
  <div class="form-container" *ngIf="!authToggle">
    <div class="top">
      <p class="title">Log in</p>
      <p class="p">to continue to DriveFinder.</p>
    </div>

    <div class="auth__container">
      <div class="buttons-container">
        <div class="google-login-button" (click)="loginWithGoogle()">
          <img src="./assets/img/icons/google.svg" alt="google icon" />

          <span>Continue with Google</span>
        </div>
      </div>

      <div class="separator-container">
        <div class="separator-line"></div>
        <div class="separator-text">or</div>
        <div class="separator-line"></div>
      </div>

      <form class="form" [formGroup]="loginForm" (ngSubmit)="signinWithEmail()">
        <div class="input-group">
          <label class="user-label">Email Address</label>
          <input
            type="email"
            required
            class="input"
            formControlName="email"
            [ngClass]="{'is-invalid': loginForm.get('email')?.errors?.['email']}"
          />
          <span class="error-span">
            <!-- <span *ngIf="loginForm.get('email')?.errors?.['email']">
              Incorrect email, make sure the format is correct (name@domain.com)
            </span> -->
            <span *ngIf="loginForm.get('email')?.errors?.['email']">
              Please enter a valid email address.
            </span>
          </span>
        </div>

        <div class="input-group">
          <label class="user-label">Password</label>
          <div class="input-box">
            <div class="password">
              <input
                style="padding-right: 8px; border: none"
                type="{{ showPassword ? 'text' : 'password' }}"
                required
                class="input"
                formControlName="password"
                [ngClass]="{'is-invalid': loginForm.get('password')?.errors?.['required']}"
              />
              <span class="eye-span" (click)="togglePasswordVisibility()">
                <img
                  *ngIf="showPassword; else closedEye"
                  class="eye"
                  src="/assets/img/icons/eye.svg"
                />
                <ng-template #closedEye>
                  <img src="/assets/img/icons/eye-closed.svg" class="eye" />
                </ng-template>
              </span>
            </div>

            <span class="error-span">
              <span
                *ngIf="
                  loginForm.get('password')?.hasError('required') &&
                  loginForm.get('password')?.touched
                "
              >
                Password is required.
              </span>
              <span *ngIf="loginForm.get('password')?.errors?.['minlength']">
                Password must be at least 3 characters long.
              </span>
              <span *ngIf="loginForm.get('password')?.errors?.['maxlength']">
                Password cannot be more than 9 characters long.
              </span>
            </span>
          </div>

          <div class="flex-row">
            <div class="row">
              <input type="checkbox" formControlName="rememberMe" />
              <label>Remember me </label>
            </div>
            <span class="span">Forgot password?</span>
          </div>
        </div>

        <button
          class="form-btn"
          [title]="
            loginForm.valid
              ? 'Login to your account'
              : 'Disabled until form data is valid'
          "
          [disabled]="!loginForm.valid"
        >
          Log in
        </button>
      </form>
    </div>

    <p class="sign-up-label">
      Don't have an account?
      <span (click)="authToggleFn()" class="sign-up-link">Sign up</span>
    </p>
  </div>

  <!-- //////////// -->
  <!-- //////////// -->
  <!-- //////////// -->
  <!-- //////////// -->

  <div class="form-container" *ngIf="authToggle">
    <div class="top">
      <p class="title">Create an Account</p>
      <p class="p">to continue to DriveFinder.</p>
    </div>

    <div class="auth__container">
      <div class="buttons-container">
        <div class="google-login-button" (click)="loginWithGoogle()">
          <img src="./assets/img/icons/google.svg" alt="google icon" />

          <span>Continue with Google</span>
        </div>
      </div>

      <div class="separator-container">
        <div class="separator-line"></div>
        <div class="separator-text">or</div>
        <div class="separator-line"></div>
      </div>

      <form
        class="form"
        [formGroup]="signupForm"
        (ngSubmit)="registerWithEmail()"
      >
        <div class="input-group">
          <label class="user-label">Email Address</label>
          <input
            type="email"
            required
            class="input"
            formControlName="email"
            [ngClass]="{'is-invalid': signupForm.get('email')?.errors?.['email']}"
          />
          <span class="error-span">
            <span *ngIf="signupForm.get('email')?.errors?.['email']">
              Please enter a valid email address.
            </span>
          </span>
        </div>

        <div formGroupName="emailGroup">
          <div class="input-group">
            <label class="user-label">Password</label>
            <div class="input-box">
              <div
                class="password"
                [ngClass]="{
                  'is-invalid':
                    signupForm.get('emailGroup')?.errors ||
                    ((signupForm.get('emailGroup.password')?.touched ||
                      signupForm.get('emailGroup.password')?.dirty) &&
                      !signupForm.get('emailGroup.password')?.valid)
                }"
              >
                <input
                  style="padding-right: 8px; border: none"
                  type="{{ showPassword ? 'text' : 'password' }}"
                  required
                  class="input"
                  formControlName="password"
                />
                <span class="eye-span" (click)="togglePasswordVisibility()">
                  <img
                    *ngIf="showPassword; else closedEye"
                    class="eye"
                    src="/assets/img/icons/eye.svg"
                  />
                  <ng-template #closedEye>
                    <img src="/assets/img/icons/eye-closed.svg" class="eye" />
                  </ng-template>
                </span>
              </div>
              <span class="error-span">
                <span
                  *ngIf="
                    signupForm
                      .get('emailGroup.password')
                      ?.hasError('required') &&
                    signupForm.get('emailGroup.password')?.touched
                  "
                >
                  Password is required.
                </span>
                <span
                  *ngIf="signupForm.get('emailGroup.password')?.errors?.['minlength']"
                >
                  Password must be at least 3 characters long.
                </span>
                <span
                  *ngIf="signupForm.get('emailGroup.password')?.errors?.['maxlength']"
                >
                  Password cannot be more than 9 characters long.
                </span>
              </span>
            </div>
          </div>
        </div>

        <div formGroupName="emailGroup">
          <div class="input-group">
            <label class="user-label">Confirm Password</label>
            <div class="input-box">
              <div
                class="password"
                [ngClass]="{
                  'is-invalid':
                    signupForm.get('emailGroup')?.errors ||
                    ((signupForm.get('emailGroup.confirmPassword')?.touched ||
                      signupForm.get('emailGroup.confirmPassword')?.dirty) &&
                      !signupForm.get('emailGroup.confirmPassword')?.valid)
                }"
              >
                <input
                  style="padding-right: 8px; border: none"
                  type="{{ showConfirmPassword ? 'text' : 'password' }}"
                  required
                  class="input"
                  formControlName="confirmPassword"
                  [ngClass]="{
                    'is-invalid': signupForm
                      .get('emailGroup.confirmPassword')
                      ?.hasError('match')
                  }"
                />

                <span
                  class="eye-span"
                  (click)="toggleConfirmPasswordVisibility()"
                >
                  <img
                    *ngIf="showConfirmPassword; else closedEye"
                    class="eye"
                    src="/assets/img/icons/eye.svg"
                  />
                  <ng-template #closedEye>
                    <img src="/assets/img/icons/eye-closed.svg" class="eye" />
                  </ng-template>
                </span>
              </div>
              <span class="error-span">
                <span
                  *ngIf="
                    signupForm.get('emailGroup')?.errors?.['passwordMatcherError'] &&
                    signupForm.get('emailGroup.confirmPassword')?.touched
                  "
                >
                  The confirmation does not match the password.
                </span>
              </span>
            </div>
          </div>
        </div>

        <button
          class="form-btn"
          [title]="
            signupForm.valid
              ? 'Create account'
              : 'Disabled until form data is valid'
          "
          [disabled]="!signupForm.valid"
        >
          Create Account
        </button>
      </form>
    </div>
    <p class="sign-up-label">
      Already have an account?
      <span (click)="authToggleFn()" class="sign-up-link">Sign in</span>
    </p>
  </div>
</div>

<!-- form container a fades away and disaper while b fades in and stay. -->
<!-- IF GO TO SIGN UP IS CLICK
1. CURRENT CONTAINE SLIDES LEFT small like 3px AND fades
2. NEW CONTAINER SLIDES IN FROM THE RIGH small like 3px AND STAY WELL -->
